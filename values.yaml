# Sail Operator Helm Chart - Default Values
# Override in environments/default.yaml

namespace: istio-system

bundle:
  source: redhat        # "redhat" or "konflux"
  version: "3.2.1"

pullSecret:
  name: redhat-pull-secret
  dockerConfigJson: ""  # Set via --set-file or environments/default.yaml

# Auth source (set ONE of these in environments/default.yaml):
#   useSystemPodmanAuth: true                    # Use ~/.config/containers/auth.json (persistent, recommended)
#   pullSecretFile: /path/to/pull-secret.txt     # OpenShift pull secret file
#   authFile: ~/.config/containers/auth.json     # Custom auth file path
useSystemPodmanAuth: false
pullSecretFile: ""
authFile: ""

# Gateway API CRD versions (applied via presync hooks)
gatewayAPI:
  # Kubernetes Gateway API (Gateway, HTTPRoute, etc.)
  version: "v1.4.0"
  # Gateway API Inference Extension (InferencePool, InferenceModel, etc.)
  inferenceExtensionVersion: "v1.2.0"

# Fix webhook reconciliation loop (vanilla Kubernetes only)
# Creates a Job that annotates webhooks with sailoperator.io/ignore=true
fixWebhookLoop:
  enabled: true

# Inference Gateway for KServe/llm-d
# Creates Gateway with CA bundle mount for mTLS to backend services
inferenceGateway:
  enabled: true
  name: inference-gateway
  namespace: opendatahub  # Namespace where KServe is deployed
  # CA bundle configuration
  caBundle:
    # Source secret containing the CA certificate
    sourceSecret: opendatahub-ca
    sourceNamespace: cert-manager
    # Key in the source secret (try ca.crt first, fallback to tls.crt)
    sourceKey: tls.crt
    # ConfigMap name to create with the CA bundle
    configMapName: odh-ca-bundle
    # Mount path in Gateway pod (must match KServe llm-d expectation)
    mountPath: /var/run/secrets/opendatahub
